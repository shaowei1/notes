
内存与磁盘索引相结合的多索引机制，全量的方式定期建立主磁盘索引，保证数据的完整性，实时信息以增量方式先写入内存，内存索引操作设定阀值后复制写入磁盘，形成磁盘索引，不与主索引合并，减少索引合并时间开销，同时查询内存和磁盘索引，提升搜索响应时间。  
CommitLog日志机制解决了分布式环境下的索引数据容灾问题。
近实时搜索
=============
Lucene的实时搜索分为两种：实时和近实时搜索，实时搜索依靠内存，近实时通过磁盘索引。

倒排索引的格式在写入后就很难去改变，如果能够增量建索引？Lucene“‘段”可以解决这个问题。

对于每个已经生成的段，它的倒排索引结构不再改变，而是将增量添加的文档添加到新的段中，段在一定时刻再进行合并，从而形成新的倒排索引结构。  

要想Lucene能够实时，则需要将新添加的文档IndexWriter后commit，在搜索的时候用IndexReader重新打开。

但是当索引在磁盘上时，如果索引非常大，IndexWriter的commit操作和IndexReader的open操作都非常慢，无法显现实时的效果。  

Lucene提供了RAMDirectory，即内存中的索引，能够很快commit和open，但是如果索引很大，内存不足的问题就会接踵而来。  

所以构建实时索引，需要内存索引RAMDirectory和硬盘上的索引FSDirectory相互配合来完成任务。  



